---
import Base from "@layouts/Base.astro";
import MasterKeyGeneratorForm from "@components/MasterKeyGeneratorForm.astro";
import "theme-toggles/css/expand.min.css";
---

<Base title="ZEL.ZIP IceBrk">
	<div id="color-scheme-wrapper">
  <header class="container">
    <nav>
      <ul>
        <li><strong>ZEL.ZIP</strong></li>
      </ul>
      <ul>
	      <a id="switch-color-scheme" class="contrast">SWITCH!</a>
      </ul>
    </nav>
  </header>

  <main class="container">
    <hgroup>
      <h1>IceBrk</h1>
      <p>Nintendo Devices Parental Control Master Key Generator</p>
    </hgroup>

    <MasterKeyGeneratorForm id="master-key-generator-form" />

    <article>
      <header>Your master key is:</header>
      <h2 id="master-key-text">N/A</h2>
    </article>
  </main>

  <!-- TODO(IMPROVE) -->
  <footer class="container">
    This project is a fan-made homebrew creation developed independently and is
    not affiliated with, endorsed by, or associated with Nintendo Co., Ltd or
    any of its subsidiaries, affiliates, or partners. All trademarks and
    copyrights referenced are the property of their respective owners. All tools
    provider by ZEL.ZIP are open source.
  </footer>
	</div>
</Base>

<style lang="scss">
  @use "@picocss/pico/scss/colors";

  #master-key-text.failed {
    color: colors.$red-500;
  }
</style>

<script>
  const masterKeyGeneratorForm = document.getElementById(
    "master-key-generator-form",
  );
  const masterKeyText = document.getElementById("master-key-text");
  const colorSchemeWrapper = document.getElementById("color-scheme-wrapper");

  masterKeyGeneratorForm.addEventListener("masterKeyChanged", (e) => {
    masterKeyText.textContent = e.detail.masterKey;
    if (e.detail.failed) {
      masterKeyText.classList.add("failed");
    } else {
      masterKeyText.classList.remove("failed");
    }
  });


</script>
